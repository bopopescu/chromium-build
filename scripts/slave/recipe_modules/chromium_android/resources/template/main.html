<!DOCTYPE html>
<html>
  <head>
    <style>
      table, th, td {
        border: 1px solid black;
        border-collapse: collapse;
      }
      th, td {
        padding: 5px;
      }
      th {
        cursor: pointer;
      }
      table {
        width: 100%;
      }
      .align-center {
        text-align: center;
      }
      .algin-left {
        text-align: left;
      }
    </style>
    <script type="text/javascript">
      function sortByColumn(head) {
        var tbody = head.parentNode.parentNode.nextElementSibling;
        var rows = tbody.rows;

        // Put 'tr' in rows to an array.
        var arr = Array.prototype.slice.call(rows);

        // Determine whether to asc or desc and set arrows.
        var headers = head.parentNode.getElementsByTagName('th');
        var headIndex = Array.prototype.slice.call(headers).indexOf(head);
        var asc = 1;
        for (var i = 0; i < headers.length; i++) {
          if (headers[i].dataset.ascSorted != 0) {
            if (headers[i].dataset.ascSorted == 1) {
                headers[i].getElementsByClassName('up')[0]
                    .style.display = 'none';
            } else {
              headers[i].getElementsByClassName('down')[0]
                  .style.display = 'none';
            }
            if (headers[i] == head) {
              asc = headers[i].dataset.ascSorted * -1;
            } else {
              headers[i].dataset.ascSorted = 0;
            }
            break;
          }
        }
        headers[headIndex].dataset.ascSorted = asc;
        if (asc == 1) {
            headers[headIndex].getElementsByClassName('up')[0]
                .style.display = 'inline';
        } else {
            headers[headIndex].getElementsByClassName('down')[0]
                .style.display = 'inline';
        }

        // Sort the array by the specified column number (col) and order (asc).
        arr.sort(function (a, b) {
          var aInnerHTML = a.getElementsByClassName(headIndex)[0].innerHTML;
          var bInnerHTML = b.getElementsByClassName(headIndex)[0].innerHTML;
          if (head.className == "number") {
            var avalue = Number(aInnerHTML);
            var bvalue = Number(bInnerHTML);
          } else if (head.className == "text") {
            var avalue = aInnerHTML;
            var bvalue = bInnerHTML;
          }
          return (avalue == bvalue) ? 0 : ((avalue > bvalue) ? asc : -1 * asc);
        });

        var tmpBody = "";
        for (var i = 0; i < arr.length; i++) {
          tmpBody += arr[i].outerHTML;
        }
        tbody.innerHTML = tmpBody;
      }
    </script>
  </head>
  <body>
    {% for tb_value in tb_values %}
      {% include 'template/table.html' %}
      <br>
      <br>
      <br>
    {% endfor %}
  </body>
  <script>
    Array.prototype.slice.call(document.getElementsByTagName('th'))
        .forEach(function(head, _) {
            head.addEventListener(
                "click",
                function() { sortByColumn(head); },
                false
            );
        }
    );
  </script>
</html>